<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Laksh - Computer Science @ Caltech</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', system-ui, sans-serif;
            background-color: #f8fafc;
            color: #333;
            line-height: 1.7;
            min-height: 100vh;
            position: relative;
            overflow-x: hidden;
        }

        /* Bubble Background */
        .bubble-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 0;
            overflow: hidden;
        }

        .bubble {
            position: absolute;
            animation: float linear infinite;
            pointer-events: all;
            cursor: pointer;
            image-rendering: pixelated;
            image-rendering: -moz-crisp-edges;
            image-rendering: crisp-edges;
        }

        .bubble:hover {
            filter: brightness(1.3);
        }

        .bubble.popping {
            animation: pixelPop 0.35s ease-out forwards !important;
            position: fixed !important;
        }

        @keyframes float {
            0% {
                transform: translateY(100vh) translateX(0);
                opacity: 0;
            }
            10% {
                opacity: 1;
            }
            90% {
                opacity: 1;
            }
            100% {
                transform: translateY(-100px) translateX(var(--drift));
                opacity: 0;
            }
        }

        @keyframes pixelPop {
            0% {
                transform: scale(1);
                opacity: 1;
            }
            20% {
                transform: scale(1.08);
                opacity: 0.8;
            }
            40% {
                transform: scale(0.9);
                opacity: 0.5;
            }
            60% {
                transform: scale(0.7);
                opacity: 0.25;
            }
            80% {
                transform: scale(0.5);
                opacity: 0.1;
            }
            100% {
                transform: scale(0.3);
                opacity: 0;
            }
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            padding: 3rem 2rem;
            position: relative;
            z-index: 1;
        }

        /* Header */
        header {
            margin-bottom: 3rem;
            padding-bottom: 2rem;
            border-bottom: 1px solid #e5e7eb;
        }

        .intro {
            margin-bottom: 1.5rem;
        }

        .path {
            font-family: 'Courier New', monospace;
            font-size: 0.85rem;
            color: #4f46e5;              /* indigo */
            margin-bottom: 0.5rem;
            display: inline-block;
            padding: 0.25rem 0.75rem;
            background-color: #eef2ff;   /* indigo-50 */
            border-radius: 4px;
            border: 1px solid #c7d2fe;   /* indigo-200 */
        }

        /* Navigation */
        nav {
            margin-bottom: 3rem;
            background-color: rgba(255, 255, 255, 0.8);
            padding: 1rem;
            border-radius: 8px;
            border: 1px solid #e5e7eb;
        }

        .nav-links {
            display: flex;
            gap: 2rem;
            list-style: none;
            flex-wrap: wrap;
        }

        .nav-links li {
            cursor: pointer;
            color: #6b7280;
            position: relative;
            transition: all 0.3s ease;
            padding-bottom: 0.25rem;
        }

        .nav-links li:hover {
            color: #4f46e5; /* indigo */
            transform: translateY(-2px);
        }

        .nav-links li.active {
            color: #4338ca; /* indigo-700 */
            border-bottom: 2px solid #4f46e5; /* indigo */
        }


        /* Content Sections */
        .section {
            display: none;
        }

        .section.active {
            display: block;
        }

        h1 {
            font-size: 2.5rem;
            margin-bottom: 0.25rem;
            color: #1a1a1a;
            font-weight: 600;
        }

        h2 {
            font-size: 1.5rem;
            margin-bottom: 1.5rem;
            color: #1a1a1a;
            font-weight: 600;
        }

        h3 {
            font-size: 1.1rem;
            margin-top: 1.5rem;
            margin-bottom: 0.5rem;
            color: #4338ca; /* indigo-700 */
            font-weight: 600;
        }

        p {
            margin-bottom: 1rem;
            color: #555;
        }

        .subtitle {
            color: #6b7280;
            font-size: 1rem;
            margin-bottom: 1.5rem;
        }

        /* Bubble rate control (slider) */
        .bubble-control {
            margin-top: 0.75rem;
            padding: 0.85rem 1rem;
            border-radius: 10px;
            background-color: #eef2ff00; /* indigo-50 */
            border: 1px solid #c7d2fe00; /* indigo-200 */
        }

        .bubble-control label {
            display: block;
            font-size: 0.95rem;
            color: #4338ca; /* indigo-700 */
            font-weight: 600;
            margin-bottom: 0.5rem;
        }

        .bubble-row {
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .bubble-row input[type="range"] {
            width: 100%;
            accent-color: #4f46e5; /* indigo */
        }

        .bubble-value {
            min-width: 4.5rem;
            text-align: right;
            font-family: 'Courier New', monospace;
            font-size: 0.9rem;
            color: #4f46e5; /* indigo */
        }

        /* Project Cards */
        .project-card {
            margin-bottom: 2rem;
            padding: 1.5rem;
            padding-bottom: 2rem;
            border-bottom: 1px solid #f0f0f0;
            transition: all 0.3s ease;
            border-radius: 8px;
        }

        .project-card:hover {
            transform: translateX(4px);
            background-color: #eef2ff; /* indigo-50 */
        }

        .project-card:last-child {
            border-bottom: none;
        }

        .project-card h3 {
            margin-top: 0;
            position: relative;
            display: inline-block;
        }

        .project-card h3::after {
            content: '';
            position: absolute;
            bottom: -2px;
            left: 0;
            width: 0;
            height: 2px;
            background-color: #4f46e5; /* indigo */
            transition: width 0.3s ease;
        }

        .project-card:hover h3::after {
            width: 100%;
        }

        .project-tech {
            color: #4f46e5; /* indigo */
            font-size: 0.9rem;
            margin-top: 0.5rem;
            font-weight: 500;
        }

        /* Skills */
        .skills-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 2rem;
            margin-top: 1rem;
        }

        .skill-category {
            transition: all 0.3s ease;
            padding: 1rem;
            border-radius: 8px;
            background-color: #eef2ff; /* indigo-50 */
            border: 1px solid #c7d2fe; /* indigo-200 */
        }

        .skill-category:hover {
            transform: translateY(-4px);
            background-color: #e0e7ff; /* indigo-100 */
        }

        .skill-category h4 {
            color: #4338ca; /* indigo-700 */
            margin-bottom: 0.75rem;
            font-size: 1rem;
            font-weight: 600;
        }

        .skill-list {
            list-style: none;
            font-size: 0.95rem;
            color: #666;
        }

        .skill-list li {
            margin-bottom: 0.25rem;
            padding-left: 1rem;
            position: relative;
        }

        .skill-list li::before {
            content: 'â–¸';
            position: absolute;
            left: 0;
            color: #4f46e5; /* indigo */
        }

        /* Contact Links */
        .contact-links {
            display: flex;
            gap: 2rem;
            margin-top: 1.5rem;
            flex-wrap: wrap;
        }

        .contact-links a {
            color: #4338ca; /* indigo-700 */
            text-decoration: none;
            transition: all 0.2s ease;
            border-bottom: 2px solid transparent;
            padding-bottom: 2px;
            font-weight: 500;
        }

        .contact-links a:hover {
            border-bottom-color: #4f46e5; /* indigo */
            transform: translateY(-1px);
        }

        /* Photo Gallery */
        .photo-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem;
            margin-top: 1.5rem;
        }

        .photo-item {
            position: relative;
            overflow: hidden;
            border-radius: 12px;
            aspect-ratio: 4/3;
            background-color: #eef2ff; /* indigo-50 (no gradient) */
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 2px 8px rgba(79, 70, 229, 0.12); /* indigo shadow */
            border: 1px solid #c7d2fe; /* indigo-200 */
        }

        .photo-item:hover {
            transform: scale(1.03) rotate(1deg);
            box-shadow: 0 8px 20px rgba(79, 70, 229, 0.25); /* indigo shadow */
        }

        .photo-item img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .photo-caption {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            background: linear-gradient(to top, rgba(79, 70, 229, 0.9), transparent); /* indigo overlay */
            color: white;
            padding: 1rem;
            font-size: 0.9rem;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .photo-item:hover .photo-caption {
            opacity: 1;
        }

        .photo-placeholder {
            display: flex;
            align-items: center;
            justify-content: center;
            height: 100%;
            color: #6d28d9; /* purple-700 */
            font-size: 0.9rem;
        }

        /* Research Section */
        .research-item {
            margin-bottom: 2rem;
            padding: 1.5rem;
            padding-bottom: 2rem;
            border-bottom: 1px solid #f0f0f0;
            border-radius: 8px;
            transition: all 0.3s ease;
        }

        .research-item:hover {
            background-color: #eef2ff; /* indigo-50 */
        }

        .research-item:last-child {
            border-bottom: none;
        }

        .research-meta {
            color: #6b7280;
            font-size: 0.9rem;
            margin-top: 0.5rem;
            font-style: italic;
        }

        .research-tags {
            display: flex;
            gap: 0.5rem;
            margin-top: 0.75rem;
            flex-wrap: wrap;
        }

        .tag {
            background-color: #eef2ff; /* indigo-50 */
            color: #4338ca;           /* indigo-700 */
            padding: 0.25rem 0.75rem;
            border-radius: 12px;
            font-size: 0.85rem;
            border: 1px solid #c7d2fe; /* indigo-200 */
            transition: all 0.2s ease;
        }

        .tag:hover {
            transform: scale(1.05);
            background-color: #e0e7ff; /* indigo-100 */
        }

        /* Responsive */
        @media (max-width: 768px) {
            .container {
                padding: 2rem 1rem;
            }

            h1 {
                font-size: 2rem;
            }

            .nav-links {
                gap: 1.5rem;
            }
        }

        /* Footer */
        footer {
            margin-top: 4rem;
            padding-top: 2rem;
            border-top: 1px solid #c7d2fe; /* indigo-200 (was pink) */
            color: #888;
            font-size: 0.9rem;
        }
    </style>
</head>
<body>
    <!-- Bubble Background -->
    <div class="bubble-container" id="bubbleContainer"></div>
    
    <div class="container">
        <!-- Header -->
        <header>
            <div class="intro">
                <div class="path">~/laksh</div>
                <h1>Laksh Patel</h1>
                <p class="subtitle"></p>
            </div>
        </header>

        <!-- Navigation -->
        <nav>
            <ul class="nav-links">
                <li data-section="about" class="active">About</li>
                <li data-section="projects">Projects</li>
                <li data-section="research">Research</li>
                <li data-section="photos">Photos</li>
                <li data-section="classes">Coursework</li>
                <li data-section="contact">Contact</li>
            </ul>
        </nav>

        <!-- About Section -->
        <section id="about" class="section active">
            <p>
                Hello! I'm Laksh, a frosh at <a href="https://www.caltech.edu" target="_blank">Caltech</a>. I'm pursuing a B.S in Computer Science and am active in the <a href="https://caltechaia.org/" target="_blank">AI Alignment Group.</a>
            </p>
            <p>
                Most of the time, you can find me listening to music of all sorts. My current favorite artists are
            <a href="https://www.zedd.net/" target="_blank" rel="noopener noreferrer">Zedd</a>,
            <a href="https://www.zaralarssonofficial.com/" target="_blank" rel="noopener noreferrer">Zara Larsson</a>,
            and <a href="https://en.wikipedia.org/wiki/Vishal%E2%80%93Shekhar" target="_blank" rel="noopener noreferrer">Vishal-Shekhar</a>.
            </p>

            <p>
                I'm also a large foodie--especially when it comes to all-you-can-eat sushi and south asian dishes. 
            </p>

            <!-- Bubble spawn rate bar (under foodie part) -->
            <div class="bubble-control">
                <label for="bubbleRate">more bubbles:</label>
                <div class="bubble-row">
                    <input id="bubbleRate" type="range" min="0" max="100" value="35" />
                    <div class="bubble-value" id="bubbleRateValue">35%</div>
                </div>
            </div>
        </section>

        <!-- Projects Section -->
        <section id="projects" class="section">
            <h2>Things I've Built</h2>
            
            <div class="project-card">
                <h3>Distributed Key-Value Store</h3>
                <p>
                    A fault-tolerant distributed system that implements the Raft consensus 
                    algorithm. It was a great way to understand how databases like etcd work 
                    internally, and debugging race conditions taught me patience.
                </p>
                <p class="project-tech">Go, gRPC, Docker</p>
            </div>

            <div class="project-card">
                <h3>Neural Network from Scratch</h3>
                <p>
                    Built a deep learning framework to really understand what's happening 
                    behind libraries like PyTorch. Implemented backpropagation, various 
                    optimizers, and got decent results on MNIST.
                </p>
                <p class="project-tech">Python, NumPy</p>
            </div>

            <div class="project-card">
                <h3>Custom Shell</h3>
                <p>
                    Created my own Unix shell with piping, redirection, and job control. 
                    Definitely made me appreciate bash more. Also crashed my terminal 
                    more times than I'd like to admit.
                </p>
                <p class="project-tech">C, Linux System Calls</p>
            </div>

            <div class="project-card">
                <h3>Algorithm Visualizer</h3>
                <p>
                    An interactive web app for watching sorting and pathfinding algorithms 
                    in action. Started as a learning project, ended up being useful for 
                    explaining concepts to friends.
                </p>
                <p class="project-tech">JavaScript, React, D3.js</p>
            </div>
        </section>

        <!-- Research Section -->
        <section id="research" class="section">
            <h2>Research</h2>

            <p>1.) <strong>L. Patel</strong> and A. Alsobeh, "SlangLLM: Dynamic Detection and Contextual Filtering of Slang in NLP Applications," 2025 International Conference on Secure IoT, Assured and Trusted Computing (SATC) 
              <small>done during a summer program @ siu carbondale; had a lot of chick-fil-a @ siuc</small>
              <br>
            
            </p>
            <p></p>
        </section>

        <!-- Photos Section -->
        <section id="photos" class="section">
            <h2>Favorite Photos</h2>
            <p>Some moments and places I've captured along the way.</p>
            
            <div class="photo-grid">
                <div class="photo-item">
                    <div class="photo-placeholder">Caltech Campus at Sunset</div>
                    <div class="photo-caption">The Beckman Institute at golden hour</div>
                </div>
                <div class="photo-item">
                    <div class="photo-placeholder">Hiking in Big Sur</div>
                    <div class="photo-caption">McWay Falls on a foggy morning</div>
                </div>
                <div class="photo-item">
                    <div class="photo-placeholder">Coffee Shop Code Session</div>
                    <div class="photo-caption">Late night debugging at my favorite spot</div>
                </div>
                <div class="photo-item">
                    <div class="photo-placeholder">Team Hackathon</div>
                    <div class="photo-caption">2AM and still going strong</div>
                </div>
                <div class="photo-item">
                    <div class="photo-placeholder">Joshua Tree</div>
                    <div class="photo-caption">Weekend climbing trip</div>
                </div>
                <div class="photo-item">
                    <div class="photo-placeholder">Lab Equipment</div>
                    <div class="photo-caption">My workspace during research hours</div>
                </div>
            </div>
        </section>

        <!-- classes Section -->
        <section id="classes" class="section">
            <h2>Coursework</h2>
            <ul>
               <li>
                CS Seminar: Machine Learning
                <p> <small>MLPs, CNNs, GANs, transformers, and a lot of stats</small></p>
              </li>
              <li>
                Dynamical Systems
                <p> <small>learned how to pronounce "lyapunov" and traveled a lot to present the work; wrote a <a href="https://www.arxiv.org/pdf/2506.17283" target="_blank">paper</a> with my <a href="https://akhileshraj91.github.io/" target="_blank">mentor</a> </small></p>
              </li>
              <li>
                Linear Algebra
                <p> <small>so many tardies in one class (it was an 8am) </small></p>
              </li>
              
              <li>
                Discrete Mathematics
                <p> <small>graph theory was defo the best part</small></p>
              </li>
              
              <li>
                Computational Sciences
                <p> <small>simulated just about everything; did not sleep</small></p>
              </li>
              <li>
                Independent Study in Computational Neuroscience
                <p> <small>so many prereqs, but it was 100% worth it; honestly considered the CNS major b/c of this class </small></p>
              </li>
              <li>
                Microcontrollers
                <p> <small>computer vision</small></p>
              </li>
              <li>
                Advanced Programming
                <p> <small>standard DSA</small></p>
              </li>
              <li>
                Organic Chemistry
                <p> <small>pretty standard stuff</small></p>
              </li>
              <li>
                Multivariable Calculus
                <p> <small>pretty standard stuff</small></p>
              </li>
              <li>
                Independent Study in Modern South Asian Geopolitics
                <p> <small>my fav humanities course so far </small></p>
              </li>
              <li>
                Chinese History
                <p> <small>can recite the dynasties chronologically</small></p>
              </li>
              
            </ul>
            
        </section>

        <!-- Contact Section -->
        <section id="contact" class="section">
            <h2>Get in Touch</h2>
            <p>
                Always happy to chat about CS, potential p n rojects, or just to connect. 
                Feel free to reach out!
            </p>
            <div class="contact-links">
                <a href="/cdn-cgi/l/email-protection#264a474d554e6645474a5243454e08434253">Email</a>
                <a href="https://github.com/laksh" target="_blank">GitHub</a>
                <a href="https://linkedin.com/in/laksh" target="_blank">LinkedIn</a>
            </div>
        </section>

        <footer>
            
        </footer>
    </div>

    <script data-cfasync="false" src="/cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"></script><script>
        // Navigation
        const navLinks = document.querySelectorAll('.nav-links li');
        const sections = document.querySelectorAll('.section');
        const pathDisplay = document.querySelector('.path');

        navLinks.forEach(link => {
            link.addEventListener('click', function() {
                const targetSection = this.getAttribute('data-section');
                
                // Update active nav link
                navLinks.forEach(l => l.classList.remove('active'));
                this.classList.add('active');
                
                // Update visible section
                sections.forEach(section => {
                    section.classList.remove('active');
                    if (section.id === targetSection) {
                        section.classList.add('active');
                    }
                });

                // Update path
                pathDisplay.textContent = `~/laksh/${targetSection}`;
            });
        });

        // Bubble Generation and Interaction
        const bubbleContainer = document.getElementById('bubbleContainer');

        // --- Spawn rate control state ---
        const bubbleRateSlider = document.getElementById('bubbleRate');
        const bubbleRateValue = document.getElementById('bubbleRateValue');

        // base timing + caps (matches your current feel, but adjustable)
        const BASE_INTERVAL_MS = 2500;     // your current interval
        const MIN_INTERVAL_MS  = 450;      // fastest spawn when slider maxed
        const MAX_BUBBLES_MIN  = 6;        // minimum cap when slider at 0
        const MAX_BUBBLES_MAX  = 22;       // maximum cap when slider at 100

        let spawnIntervalId = null;
        let spawnIntervalMs = BASE_INTERVAL_MS;
        let maxBubbles = 12;               // your current cap

        function clamp(n, a, b) { return Math.max(a, Math.min(b, n)); }

        function applySpawnRate(percent) {
            // percent: 0..100
            const p = clamp(percent, 0, 100) / 100;

            // Higher = faster spawns (interval decreases)
            spawnIntervalMs = Math.round(BASE_INTERVAL_MS - p * (BASE_INTERVAL_MS - MIN_INTERVAL_MS));

            // Higher = allow more bubbles
            maxBubbles = Math.round(MAX_BUBBLES_MIN + p * (MAX_BUBBLES_MAX - MAX_BUBBLES_MIN));

            // Update UI text
            if (bubbleRateValue) bubbleRateValue.textContent = `${Math.round(p * 100)}%`;

            // Restart spawner with new timing
            if (spawnIntervalId) clearInterval(spawnIntervalId);
            spawnIntervalId = setInterval(() => {
                if (bubbleContainer.children.length < maxBubbles) {
                    createBubble();
                }
            }, spawnIntervalMs);
        }

        if (bubbleRateSlider) {
            // Initial set from slider value
            applySpawnRate(parseInt(bubbleRateSlider.value, 10));

            bubbleRateSlider.addEventListener('input', (e) => {
                applySpawnRate(parseInt(e.target.value, 10));
            });
        }

        function createPixelBubble(size) {
            // Create canvas for pixel art
            const canvas = document.createElement('canvas');
            const pixelSize = 4; // Size of each pixel block
            canvas.width = size;
            canvas.height = size;
            const ctx = canvas.getContext('2d');
            
            const centerX = size / 2;
            const centerY = size / 2;
            const radius = size / 2 - pixelSize;
            
            // Consistent blue/indigo variations with transparency (no pink)
            const blueShades = [
                'rgba(99, 102, 241, 0.22)',  // indigo - main
                'rgba(165, 180, 252, 0.35)', // indigo-200 - shine
                'rgba(59, 130, 246, 0.18)',  // blue - edge
                'rgba(224, 231, 255, 0.45)', // indigo-100 - highlight
            ];
            
            // Draw pixel bubble
            for (let y = 0; y < size; y += pixelSize) {
                for (let x = 0; x < size; x += pixelSize) {
                    const dx = x + pixelSize/2 - centerX;
                    const dy = y + pixelSize/2 - centerY;
                    const distance = Math.sqrt(dx * dx + dy * dy);
                    
                    if (distance <= radius) {
                        // Create shine effect on top-left
                        const shineX = centerX - radius * 0.3;
                        const shineY = centerY - radius * 0.3;
                        const shineDx = x + pixelSize/2 - shineX;
                        const shineDy = y + pixelSize/2 - shineY;
                        const shineDistance = Math.sqrt(shineDx * shineDx + shineDy * shineDy);
                        
                        let color;
                        if (shineDistance < radius * 0.25) {
                            color = blueShades[3]; // brightest for shine
                        } else if (shineDistance < radius * 0.4) {
                            color = blueShades[1]; // lighter for shine area
                        } else if (distance < radius * 0.7) {
                            color = blueShades[0]; // main indigo
                        } else {
                            color = blueShades[2]; // edge
                        }
                        
                        ctx.fillStyle = color;
                        ctx.fillRect(x, y, pixelSize, pixelSize);
                    }
                }
            }
            
            return canvas.toDataURL();
        }
        
        function createBubble() {
            const bubble = document.createElement('div');
            bubble.className = 'bubble';
            
            // Random size between 32px and 96px (multiples of pixel size work best)
            const size = Math.floor((Math.random() * 16 + 8)) * 4;
            bubble.style.width = `${size}px`;
            bubble.style.height = `${size}px`;
            
            // Create pixel art bubble
            const bubbleImg = createPixelBubble(size);
            bubble.style.backgroundImage = `url(${bubbleImg})`;
            bubble.style.backgroundSize = 'contain';
            
            // Random horizontal position
            const left = Math.random() * 100;
            bubble.style.left = `${left}%`;
            
            // Random animation duration
            const duration = (size / 32) * 8 + Math.random() * 4;
            bubble.style.animationDuration = `${duration}s`;
            
            // Random horizontal drift
            const drift = (Math.random() - 0.5) * 200;
            bubble.style.setProperty('--drift', `${drift}px`);
            
            // Add to container
            bubbleContainer.appendChild(bubble);
            
            // Store bubble data for proximity detection
            bubble.dataset.popped = 'false';
            
            // Remove bubble after animation completes
            setTimeout(() => {
                if (bubble.parentNode) {
                    bubble.remove();
                }
            }, duration * 1000);
        }
        
        // Track mouse position
        let mouseX = -1000;
        let mouseY = -1000;
        
        document.addEventListener('mousemove', (e) => {
            mouseX = e.clientX;
            mouseY = e.clientY;
        });
        
        // Check bubble proximity to cursor
        function checkBubbleProximity() {
            const bubbles = bubbleContainer.querySelectorAll('.bubble:not(.popping)');
            
            bubbles.forEach(bubble => {
                if (bubble.dataset.popped === 'true') return;
                
                const rect = bubble.getBoundingClientRect();
                const bubbleCenterX = rect.left + rect.width / 2;
                const bubbleCenterY = rect.top + rect.height / 2;
                
                const dx = mouseX - bubbleCenterX;
                const dy = mouseY - bubbleCenterY;
                const distance = Math.sqrt(dx * dx + dy * dy);
                
                // Pop if cursor is within 60px of bubble center
                const popDistance = 60;
                if (distance < popDistance) {
                    bubble.dataset.popped = 'true';
                    
                    // Freeze bubble position before popping
                    bubble.style.left = rect.left + 'px';
                    bubble.style.top = rect.top + 'px';
                    bubble.style.transform = 'none';
                    
                    bubble.classList.add('popping');
                    
                    setTimeout(() => {
                        bubble.remove();
                    }, 350);
                }
            });
        }
        
        
        // Check proximity every frame
        function animate() {
            checkBubbleProximity();
            requestAnimationFrame(animate);
        }
        animate();
        
        // Create initial bubbles
        for (let i = 0; i < 8; i++) {
            setTimeout(() => createBubble(), i * 1000);
        }

        // If slider isn't present for some reason, fall back to old behavior.
        if (!bubbleRateSlider) {
            setInterval(() => {
                if (bubbleContainer.children.length < 12) {
                    createBubble();
                }
            }, 2500);
        }
    </script>
</body>
</html>
